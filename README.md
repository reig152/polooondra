## 1. avito_api_methods

### В данном блоке реализовано взаимодействие с api авито
для рендера сообщений в тг боте

- Класс `AvitoApi`
- 2 основных метода: `get_access_token` и `make_request`, получающие токен авторизации и выполняющие get/post запросы в зависимости от переданных параметров
- Остальные методы получают необходимую информацию для рендера окон в диалоге с ботом, например: `get_all_messages` показывает весь диалог конкретного чата
- В dialog_methods.py и dialog_methods_utils.py показаны примеры взаимодействия с `AvitoApi`

## 2. parsing_cadastr

### В данном блоке реализован асинхронный парсер по поиску кадастрового номера объекта недвижимости

- Класс `CadastreNumbers`
- Класс принимает параметры блока (адрес, площадь и этаж), в зависимости от переданных параметров определяется тип объекта: помещение/здание
- парсинг начинается с `find_all_numbers`, который находит все кадастровые номера по переданному адресу
- `process_numbers` выполняет обработку каждого из полученных номеров, создаются задачи посредством `gather`  и выполняются асинхронные запросы, количество запросов ограничивается через `Semaphore` , чтобы не перегрузить сайт
- на каждом запросе проверяются параметры объекта, в случае совпадения, отправляется результат через `send_result`

## 3. **report_classes**

### В данном блоке реализован базовый класс для составления отчетов отдела актуализации

- Класс `Reports`
- Класс принимает название задачи(отчет), модель этого отчета, название таблицы, к которой выполняется запрос, параметр для таблицы и рынок
- `get_data` получает из `SQLTemplates` необходимый шаблон запроса и выполняет запрос к БД с помощью `make_request`
- `make_request` выполняет запрос к БД и формирует данные для добавления в модель, в зависимости от переданной задачи формируется шаблон данных
- по итогу происходит вызов `add_to_db`, который обращается к классу `AddToDb` и передает данные для сохранения в модель
